{% macro icon(name) -%}
  {% set icons = {
    'plus':'<svg aria-hidden="true" viewBox="0 0 16 16" width="16" height="16"><path d="M7 1h2v6h6v2H9v6H7V9H1V7h6z"/></svg>',
    'edit':'<svg aria-hidden="true" viewBox="0 0 16 16" width="16" height="16"><path d="M12.3 1.7a1 1 0 0 1 1.4 1.4l-9 9L3 12l-.1-1.7zM2 13l3 .1L13.3 4.8l-3-3z"/></svg>',
    'back':'<svg aria-hidden="true" viewBox="0 0 16 16" width="16" height="16"><path d="M9 3 4 8l5 5V9h7V7H9z"/></svg>',
    'download':'<svg aria-hidden="true" viewBox="0 0 16 16" width="16" height="16"><path d="M7 1h2v7h4L8 15 3 8h4zM2 13h12v2H2z"/></svg>'
  } %}
  {{ icons.get(name, '')|safe }}
{%- endmacro %}

{% macro button(text, href=None, variant='primary', type='button') -%}
  {% set classes = 'btn' %}
  {% if variant and variant != 'primary' %}
    {% set classes = classes + ' ' + variant %}
  {% endif %}
  {% if href %}
    <a class="{{ classes }}" href="{{ href }}">{{ text }}</a>
  {% else %}
    <button class="{{ classes }}" type="{{ type }}">{{ text }}</button>
  {% endif %}
{%- endmacro %}

{% macro badge(text, tone='neutral') -%}
  <span class="badge{{ ' ' + tone if tone != 'neutral' else '' }}">{{ text }}</span>
{%- endmacro %}

{% macro field(name, label, type='text', value='', error=None, help=None, attrs='') -%}
  {% set fid = 'id-' ~ name %}
  <div class="field">
    <label for="{{ fid }}">{{ label }}</label>
    {% if type == 'textarea' %}
      <textarea name="{{ name }}" id="{{ fid }}" {{ attrs|safe }}{% if error %} aria-invalid="true" aria-describedby="{{ fid }}-error"{% endif %}>{{ value }}</textarea>
    {% elif type == 'select' %}
      <select name="{{ name }}" id="{{ fid }}" {{ attrs|safe }}{% if error %} aria-invalid="true" aria-describedby="{{ fid }}-error"{% endif %}>{{ value|safe }}</select>
    {% else %}
      <input type="{{ type }}" name="{{ name }}" id="{{ fid }}" value="{{ value }}" {{ attrs|safe }}{% if error %} aria-invalid="true" aria-describedby="{{ fid }}-error"{% endif %}/>
    {% endif %}
    {% if error %}
      <small id="{{ fid }}-error">{{ error }}</small>
    {% elif help %}
      <small>{{ help }}</small>
    {% endif %}
  </div>
{%- endmacro %}
