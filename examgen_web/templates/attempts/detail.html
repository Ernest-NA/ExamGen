{% extends "base.html" %}
{% block title %}{{ _('Resultado del intento') }}{% endblock %}
{% block content %}
<section class="container">
  <header class="page-header">
    <h1>{{ _('Resultado del intento') }}</h1>
    <div class="actions">
      <a class="btn" href="{{ url_for('player.export_attempt_csv', attempt_id=attempt.id) }}">{{ _('CSV') }}</a>
      <a class="btn" href="{{ url_for('player.export_attempt_json', attempt_id=attempt.id) }}">{{ _('JSON') }}</a>
    </div>
  </header>
  <p>{{ _('Calificación') }}: {{ attempt.score or 0 }} / {{ attempt.questions|length }}</p>
  <table class="table">
    <thead>
      <tr>
        <th>{{ _('Pregunta') }}</th>
        <th>{{ _('Respuesta') }}</th>
        <th>{{ _('Correcta') }}</th>
        <th>{{ _('Estado') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for q in attempt.questions %}
      <tr>
        <td>{{ q.prompt }}</td>
        <td>{{ attempt.answers.get(q.id, '') }}</td>
        <td>{% for o in q.options if o.is_correct %}{{ o.letter }}{% endfor %}</td>
        <td>{{ '✔' if q.get('is_correct') else '✘' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <p>
    <a href="/attempts">{{ _('Volver al historial') }}</a> |
    <a href="/exams">{{ _('Lista de exámenes') }}</a>
  </p>
</section>
{% endblock %}
